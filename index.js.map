{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const IMAGES_PER_PAGE = 40;\nexport let currentPage = 1;\n\nexport function fetchImages(searchText, isNextPage = false) {\n  if (isNextPage) {\n    ++currentPage;\n  } else {\n    currentPage = 1;\n  }\n\n  const options = {\n    params: {\n      key: '49142387-370a201ec94f73d63c9116370',\n      q: searchText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      iMAGES_per_page: IMAGES_PER_PAGE,\n      page: currentPage,\n    },\n  };\n  return axios.get('https://pixabay.com/api/', options);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-box');\nconst btnLoadMore = document.getElementById('load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderImages(images, isNextPage = false) {\n  if (!isNextPage) gallery.innerHTML = '';\n\n  const galleryHtml = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <figure class=\"thumb-container\">\n                <img\n                  class=\"thumb-image\"\n                  src=\"${webformatURL}\"\n                  data-source=\"${largeImageURL}\"\n                  alt=\"${tags}\"\n                />\n                <figcaption class=\"thumb-data\">\n                  <dl class=\"thumb-data-list\">\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Likes</dt>\n                      <dd class=\"thumb-data-data\">${likes}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Views</dt>\n                      <dd class=\"thumb-data-data\">${views}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Comments</dt>\n                      <dd class=\"thumb-data-data\">${comments}</dd>\n                    </div>\n                    <div class=\"thumb-data-item\">\n                      <dt class=\"thumb-data-title\">Downloads</dt>\n                      <dd class=\"thumb-data-data\">${downloads}</dd>\n                    </div>\n                  </dl>\n                </figcaption>\n              </figure>\n            </a>\n          </li>\n        `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryHtml);\n  lightbox.refresh();\n\n  if (isNextPage && images.length) {\n    scrollGallery();\n  }\n}\n\nfunction scrollGallery() {\n  const card = document.querySelector('.gallery-item');\n  if (!card) return;\n\n  const cardHeight = card.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport function showLoadingView(isNextPage = false) {\n  if (!isNextPage) {\n    gallery.classList.add('hidden');\n  }\n  loader.classList.remove('hidden');\n}\n\nexport function hideLoadingView() {\n  gallery.classList.remove('hidden');\n  loader.classList.add('hidden');\n}\n\nexport function showMessageNoResults() {\n  iziToast.error({\n    position: 'topRight',\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    backgroundColor: '#EF4040',\n  });\n}\nexport function showMessageLastPage() {\n  iziToast.info({\n    position: 'topRight',\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nexport function showButtonLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\n\nexport function hideButtonLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n","import { currentPage, fetchImages, IMAGES_PER_PAGE } from './js/pixabay-api';\nimport {\n  hideButtonLoadMore,\n  hideLoadingView,\n  renderImages,\n  showButtonLoadMore,\n  showLoadingView,\n  showMessageLastPage,\n  showMessageNoResults,\n} from './js/render-functions';\n\nconst form = document.querySelector('form');\nconst input = document.querySelector('#search-text');\nconst btnLoadMore = document.getElementById('load-more');\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  handleSearch();\n});\n\nbtnLoadMore.addEventListener('click', () => handleSearch(true));\n\nasync function handleSearch(isNextPage = false) {\n  hideButtonLoadMore();\n  const searchText = input.value;\n\n  if (!searchText) {\n    return;\n  }\n\n  showLoadingView(isNextPage);\n\n  try {\n    const data = await fetchImages(searchText, isNextPage);\n\n    handleSearchResults(data.data, isNextPage);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction handleSearchResults(\n  { hits: images, totalHits: imagesCount },\n  isNextPage\n) {\n  const pagesCount = Math.ceil(imagesCount / IMAGES_PER_PAGE);\n  const isLastPage = currentPage === pagesCount;\n  const hasResults = !!images.length;\n\n  if (!hasResults) {\n    showMessageNoResults();\n  }\n\n  if (isLastPage) {\n    showMessageLastPage();\n  }\n\n  if (hasResults && !isLastPage) {\n    showButtonLoadMore();\n  }\n\n  hideLoadingView();\n  renderImages(images, isNextPage);\n}\n"],"names":["IMAGES_PER_PAGE","currentPage","fetchImages","searchText","isNextPage","options","axios","gallery","loader","btnLoadMore","lightbox","SimpleLightbox","renderImages","images","galleryHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","scrollGallery","card","cardHeight","showLoadingView","hideLoadingView","showMessageNoResults","iziToast","showMessageLastPage","showButtonLoadMore","hideButtonLoadMore","form","input","handleSearch","data","handleSearchResults","err","imagesCount","pagesCount","isLastPage","hasResults"],"mappings":"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"}