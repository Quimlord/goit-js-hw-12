{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49142387-370a201ec94f73d63c9116370';\nconst BASE_URL = 'https://pixabay.com';\nconst END_POINT = '/api';\n\nexport async function getPhotos(q, page) {\n  const params = {\n    q,\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 9,\n    page,\n  };\n  const options = new URLSearchParams(params);\n  const url = `${BASE_URL}${END_POINT}/?${options}`;\n\n  const res = await axios.get(url);\n  try {\n    return res.data;\n  } catch {\n    iziToast.error({\n      title: 'Error',\n      message: 'Ups.. Something wrong',\n      position: 'topRight',\n    });\n  }\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      item => `<li class=\"gallary-item\">\n              <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                <img\n                  src=\"${item.webformatURL}\"\n                  alt=\"${item.tags}\"\n                />\n              </a>\n              <ul class=\"gallary-item-info\">\n                <li class=\"info-block\">\n                  <h5>Likes</h5>\n                  <p>${item.likes}</p>\n                </li>\n                <li class=\"info-block\">\n                  <h5>Views</h5>\n                  <p>${item.views}</p>\n                </li>\n                <li class=\"info-block\">\n                  <h5>Comments</h5>\n                  <p>${item.comments}</p>\n                </li>\n                <li class=\"info-block\">\n                  <h5>Downloads</h5>\n                  <p>${item.downloads}</p>\n                </li>\n              </ul>\n            </li>`\n    )\n    .join('');\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n//============================\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { Spinner } from 'spin.js';\n\n//?============================================\n\nimport { getPhotos } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form-js');\nconst gallery = document.querySelector('.gallery');\nconst target = document.querySelector('.js-backdrop');\nconst loadBtn = document.querySelector('.js-load-more');\nloadBtn.addEventListener('click', handleLoadClick);\nform.addEventListener('submit', handleSubmit);\n\nconst spinnerOpts = {\n  lines: 9, // The number of lines to draw\n  length: 42, // The length of each line\n  width: 24, // The line thickness\n  radius: 45, // The radius of the inner circle\n  scale: 0.9, // Scales overall size of the spinner\n  corners: 1, // Corner roundness (0..1)\n  speed: 0.8, // Rounds per second\n  rotate: 0, // The rotation offset\n  animation: 'spinner-line-fade-quick', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#ffffff', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '50%', // Top position relative to parent\n  left: '50%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\n\nconst spinner = new Spinner(spinnerOpts);\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet searchQuery = '';\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n  spinnerRun();\n  page = 1;\n  gallery.innerHTML = '';\n  searchQuery = e.target.elements.input.value.trim();\n  if (searchQuery.length === 0) {\n    spinnerStop();\n    return iziToast.error({\n      message: 'Sorry, your query is empty Please try again!',\n      position: 'topRight',\n    });\n  }\n  const res = await getPhotos(searchQuery, page);\n  try {\n    if (res.hits.length === 0) {\n      loadBtn.classList.add('is-hidden');\n      gallery.innerHTML = '';\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n    gallery.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n    lightbox.refresh();\n    if (res.totalHits > 9) {\n      loadBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinnerStop();\n  }\n}\n\nasync function handleLoadClick() {\n  spinnerRun();\n  page += 1;\n  const res = await getPhotos(searchQuery, page);\n  try {\n    const lastPage = Math.ceil(res.totalHits / 9);\n    if (lastPage === page) {\n      loadBtn.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    gallery.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n\n    const imgHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n      top: imgHeight * 2,\n      behavior: 'smooth',\n    });\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinnerStop();\n  }\n}\n\nfunction spinnerRun() {\n  spinner.spin(target);\n  target.classList.remove('is-hidden');\n}\n\nfunction spinnerStop() {\n  spinner.stop(target);\n  target.classList.add('is-hidden');\n}\n"],"names":["API_KEY","BASE_URL","END_POINT","getPhotos","q","page","params","options","url","res","axios","createMarkup","arr","item","form","gallery","target","loadBtn","handleLoadClick","handleSubmit","spinnerOpts","spinner","Spinner","lightbox","SimpleLightbox","searchQuery","e","spinnerRun","spinnerStop","iziToast","error","imgHeight"],"mappings":"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"}