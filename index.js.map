{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49142387-370a201ec94f73d63c9116370';\n\nexport async function getImages(value) {\n  let params = {\n    key: API_KEY,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  //   return await axios\n  //     .get(BASE_URL, { params })\n  //     .then(res => {\n  //       if (res.data.hits.length === 0) {\n  //         iziToast.error({\n  //           message:\n  //             'Sorry, there are no images matching your search query. Please try again!',\n  //           position: 'topRight',\n  //           pauseOnHover: true,\n  //           balloon: true,\n  //         });\n  //       }\n  //       return res.data.hits;\n  //     })\n  //     .catch(error => {\n  //       console.error(error);\n  //       throw error;\n  //     });\n\n  try {\n    const res = await axios.get(BASE_URL, { params });\n    if (res.data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        pauseOnHover: true,\n        balloon: true,\n      });\n    }\n    return res.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n}\n","export function templateImage(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n\n  const altText = image.tags.split(',')[0];\n  return `\n    <li class=\"gallery-item\">\n    <div class=\"wrapper\"> \n\n     <a href=\"${largeImageURL}\" class=\"gallery-link\" >\n    <img src=\"${webformatURL}\"\n      class=\"gallery-image\"\n      alt=\"${altText}\"\n    />\n  </a>\n  \n    </div>\n<div class=\"details\">\n  <p class=\"detail-info\">Likes<br><span class=\"detail-value\"> ${likes}</span></p>\n  <p class=\"detail-info\">Views<br><span class=\"detail-value\"> ${views}</span> </p>\n  <p class=\"detail-info\">Comments<br><span class=\"detail-value\"> ${comments}</span> </p>\n  <p class=\"detail-info\">Downloads<br><span class=\"detail-value\"> ${downloads}</span> </p>\n\n  </div>\n    </li>\n    `;\n}\nexport function templateImages(images) {\n  return images.map(templateImage).join('');\n}\n","import { getImages } from './js/pixabay-api';\nimport { templateImages } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchform = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\nconst loadButton = document.querySelector('.load-button-style');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst params = {\n  query: '',\n  page: 1,\n  perPage: 40,\n  total: 0,\n};\n\nhideLoadMoreBtn();\nhideLoaderMore();\n\nsearchform.addEventListener('submit', async e => {\n  e.preventDefault();\n  params.page = 1;\n  params.query = searchform.elements.searchQuery.value.trim();\n\n  if (params.query === '') {\n    iziToast.warning({\n      message: 'Please, fill the form!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  hideLoadMoreBtn();\n  hideLoaderMore();\n  loader.classList.add('visible');\n\n  try {\n    const data = await getImages(params.query, params.page, params.perPage);\n    params.total = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        message: 'No images found. Try another query.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', templateImages(data.hits));\n    lightbox.refresh();\n    checkButtonStatus();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong, try again later!',\n    });\n    console.error(error);\n  } finally {\n    loader.classList.remove('visible');\n  }\n\n  e.target.reset();\n});\n\nloadButton.addEventListener('click', async e => {\n  e.preventDefault();\n  params.page += 1;\n\n  hideLoadMoreBtn();\n  showLoaderMore();\n\n  try {\n    const data = await getImages(params.query, params.page, params.perPage);\n\n    gallery.insertAdjacentHTML('beforeend', templateImages(data.hits));\n    lightbox.refresh();\n    smoothScroll();\n    checkButtonStatus();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong, try again later!',\n    });\n    console.error(error);\n  } finally {\n    hideLoaderMore();\n  }\n});\n\nfunction showLoadMoreBtn() {\n  loadButton.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadButton.style.display = 'none';\n}\n\nfunction showLoaderMore() {\n  loaderMore.classList.remove('visually-hidden'); // Видаляємо прихований клас\n  loaderMore.classList.add('visible'); // Робимо його видимим\n}\n\nfunction hideLoaderMore() {\n  loaderMore.classList.add('visually-hidden'); // Додаємо прихований клас\n  loaderMore.classList.remove('visible'); // Прибираємо display: block\n}\n\nfunction checkButtonStatus() {\n  const maxPage = Math.ceil(params.total / params.perPage);\n\n  if (params.page < maxPage) {\n    showLoadMoreBtn();\n  } else {\n    hideLoadMoreBtn();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topLeft',\n    });\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["BASE_URL","API_KEY","getImages","value","params","res","axios","error","templateImage","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","altText","templateImages","images","searchform","gallery","loader","loaderMore","loadButton","lightbox","SimpleLightbox","hideLoadMoreBtn","hideLoaderMore","e","iziToast","data","checkButtonStatus","showLoaderMore","smoothScroll","showLoadMoreBtn","maxPage","cardHeight"],"mappings":"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"}